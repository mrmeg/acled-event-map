(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{179:function(e,t,a){e.exports=a(302)},184:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n,o=a(1),i=a.n(o),l=a(22),r=a.n(l),c=(a(184),a(31)),s=a(32),p=a(34),d=a(33),u=a(35),v=a(77),m=a.n(v),g=(a(52),{markerArr:[],userCoords:{},userMarker:[],value:"Click to Search"}),f=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(i)))).getAcled=function(){m.a.get("https://api.acleddata.com/acled/read?terms=accept&limit=2000").then(function(e){console.log(e.data.data),g.acledData=e.data.data}).catch(function(e){console.log(e)})},a.handleEventType=function(e){a.clearMarkers();var t=[],o=new window.google.maps.InfoWindow({});g.acledData.forEach(function(i){if(i.event_type===e){var l=Number(i.latitude),r=Number(i.longitude),c=new window.google.maps.Marker({position:{lat:l,lng:r},map:n,clickable:!0,visible:!0});t.push(c),g.markerArr=t;var s='<div class="infoWindow">'+'<p class="eventType">Event Type: '.concat(i.event_type,"</p>")+'<p class="eventDate">Date: '.concat(i.event_date,"</p>")+'<p class="description">Description: '.concat(i.notes,"</p>")+'<p class="source">Source: '.concat(i.source,"</p>")+'<p class="fatalities">Fatalities: '.concat(i.fatalities,"</p>")+"</div>";o.setContent(s),a.bindInfoWindow(c,window.map,o,o.content)}})},a.handleFatalities=function(){a.clearMarkers();var e=[],t=new window.google.maps.InfoWindow({});g.acledData.forEach(function(o){if("0"!==o.fatalities){var i=Number(o.latitude),l=Number(o.longitude),r=new window.google.maps.Marker({position:{lat:i,lng:l},map:n,clickable:!0,visible:!0});e.push(r),g.markerArr=e;var c='<div class="infoWindow">'+'<p class="eventType">Event Type: '.concat(o.event_type,"</p>")+'<p class="eventDate">Date: '.concat(o.event_date,"</p>")+'<p class="description">Description: '.concat(o.notes,"</p>")+'<p class="source">Source: '.concat(o.source,"</p>")+'<p class="fatalities">Fatalities: '.concat(o.fatalities,"</p>")+"</div>";t.setContent(c),a.bindInfoWindow(r,window.map,t,t.content)}})},a.bindInfoWindow=function(e,t,a,n){window.google.maps.event.addListener(e,"click",function(){a.setContent(n),a.open(t,e)})},a.clearMarkers=function(){g.markerArr.forEach(function(e){e.setMap(null)})},a.findDistance=function(e,t){return(window.google.maps.geometry.spherical.computeDistanceBetween(e,t)/1e3).toFixed(2)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.getAcled();var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyAH1RNYnYcMHdOBEQHxml3yNiv4SLbgwCY&libraries=geometry";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),t.addEventListener("load",function(t){e.initMap()})}},{key:"componentDidUpdate",value:function(e){g.acledData&&e.value!==this.props.value&&(g.value=e.value,this.handleEventType(e.value)),g.acledData&&"fatalities"===e.value&&(console.log(e.value),this.handleFatalities(e.value))}},{key:"initMap",value:function(){var e=this;(n=new window.google.maps.Map(document.getElementById(this.props.id),{zoom:6,center:{lat:33.5177,lng:36.2519},gestureHandling:"greedy",minZoom:3})).addListener("click",function(e){g.acledData&&"Click to Search"===g.value&&(t(e.latLng),a(e))});var t=function(t){e.clearMarkers();var a=[],o=new window.google.maps.Marker({position:t,map:n,visible:!1});a.push(o);var i={lat:o.getPosition().lat().toFixed(4),lng:o.getPosition().lng().toFixed(4)};console.log("Lat: ".concat(i.lat," Lng: ").concat(i.lng)),g.userCoords=i,g.userMarker=a},a=function(t){e.clearMarkers();var a=new window.google.maps.InfoWindow({}),o=[];g.acledData.forEach(function(i){var l=Number(i.latitude),r=Number(i.longitude),c=new window.google.maps.Marker({position:{lat:l,lng:r},map:n,clickable:!0,visible:!1}),s='<div class="infoWindow">'+'<p class="eventType">Event Type: '.concat(i.event_type,"</p>")+'<p class="eventDate">Date: '.concat(i.event_date,"</p>")+'<p class="description">Description: '.concat(i.notes,"</p>")+'<p class="source">Source: '.concat(i.source,"</p>")+'<p class="fatalities">Fatalities: '.concat(i.fatalities,"</p>")+"</div>";a.setContent(s),e.bindInfoWindow(c,n,a,a.content);var p=new window.google.maps.LatLng(i.latitude,i.longitude);Number(e.findDistance(t.latLng,p))<250&&(o.push(c),c.visible=!0,g.markerArr=o)})}}},{key:"render",value:function(){return i.a.createElement("div",{style:this.props.style,id:this.props.id})}}]),t}(o.Component),w=a(30),h=a.n(w),b=a(14),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={id:"map",value:"Click to Search"},a.handleChange=function(e,t){a.setState({value:t})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.value;return i.a.createElement(o.Fragment,null,i.a.createElement(h.a,null,i.a.createElement(b.b,{id:"appBar",value:e,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},i.a.createElement(b.a,{label:"All Events Within 250km of Mouse Click",value:"Click to Search"}),i.a.createElement(b.a,{label:"Riots/Protests",value:"Riots/Protests"}),i.a.createElement(b.a,{label:"Remote violence",value:"Remote violence"}),i.a.createElement(b.a,{label:"Strategic development",value:"Strategic development"}),i.a.createElement(b.a,{label:"Incidents with Fatalities",value:"fatalities"}),i.a.createElement(b.a,{label:"Battle: No change of territory",value:"Battle-No change of territory"}),i.a.createElement(b.a,{label:"Battle: Non-state actor overtakes territory",value:"Battle-Non-state actor overtakes territory"}),i.a.createElement(b.a,{label:"Battle: Government regains territory",value:"Battle-Government regains territory"})),i.a.createElement(f,{value:this.state.value,id:this.state.id})))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},52:function(e,t,a){}},[[179,1,2]]]);
//# sourceMappingURL=main.7b6ef9d7.chunk.js.map